{
	"tasks": [
		{
			"label": "Test: Validate Dependencies",
			"args": [
				"-NoProfile",
				"-Command",
				"try { Write-CustomLog -Level INFO -Message 'Testing task execution'; exit 0 } catch { Write-CustomLog -Level ERROR -Message $_; exit 1 }"
			],
			"problemMatcher": "$msCompile",
			"type": "shell",
			"command": "pwsh",
			"group": "test",
			"presentation": {
				"reveal": "always",
				"echo": true,
				"panel": "shared",
				"focus": false,
				"showReuseMessage": false
			}
		},
		{
			"label": "Maintenance: Quick Health Check",
			"args": [
				"-NoProfile",
				"-File",
				"./scripts/maintenance/infrastructure-health-check.ps1"
			],
			"problemMatcher": "$msCompile",
			"type": "shell",
			"command": "pwsh",
			"group": {
				"kind": "test",
				"isDefault": true
			},
			"presentation": {
				"reveal": "always",
				"echo": true,
				"panel": "shared",
				"focus": false
			}
		},
		{
			"label": "PatchManager: Load Module with Error Handling",
			"args": [
				"-NoProfile",
				"-Command",
				"try { Import-Module '/workspaces/opentofu-lab-automation/pwsh/modules/PatchManager/' -Force -ErrorAction Stop; Write-CustomLog -Level SUCCESS -Message 'PatchManager loaded successfully' } catch { Write-CustomLog -Level ERROR -Message 'PatchManager import failed: $_'; Write-CustomLog -Level WARN -Message 'Module path: /workspaces/opentofu-lab-automation/pwsh/modules/PatchManager/'; exit 1 }"
			],
			"problemMatcher": "$msCompile",
			"type": "shell",
			"command": "pwsh",
			"group": "build",
			"presentation": {
				"reveal": "always",
				"echo": true,
				"panel": "shared",
				"focus": false
			}
		},
		{
			"label": "Test: Run Pester Tests with Error Handling",
			"args": [
				"-NoProfile",
				"-Command",
				"try { Invoke-Pester -Path './tests/' -Output Detailed -PassThru } catch { Write-CustomLog -Level ERROR -Message 'Pester test error: $_'; exit 1 }"
			],
			"problemMatcher": "$msCompile",
			"type": "shell",
			"command": "pwsh",
			"group": "test",
			"presentation": {
				"reveal": "always",
				"echo": true,
				"panel": "shared",
				"focus": false
			}
		},
		{
			"label": "PSScriptAnalyzer: Full Analysis with Error Handling",
			"args": [
				"-NoProfile",
				"-Command",
				"try { if (Get-Module -ListAvailable -Name PSScriptAnalyzer) { Invoke-ScriptAnalyzer -Path './pwsh/' -Recurse -Severity Warning,Error -IncludeDefaultRules | Format-Table -AutoSize } else { Write-CustomLog -Level ERROR -Message 'PSScriptAnalyzer module not found. Install with: Install-Module PSScriptAnalyzer -Force'; exit 1 } } catch { Write-CustomLog -Level ERROR -Message 'PSScriptAnalyzer error: $_'; exit 1 }"
			],
			"problemMatcher": "$msCompile",
			"type": "shell",
			"command": "pwsh",
			"group": "test",
			"presentation": {
				"reveal": "always",
				"echo": true,
				"panel": "shared",
				"focus": false
			}
		}
	],
	"inputs": [
		{
			"type": "promptString",
			"id": "patchDescription",
			"default": "VS Code task patch",
			"description": "Enter patch description"
		}
	],
	"version": "2.0.0"
}